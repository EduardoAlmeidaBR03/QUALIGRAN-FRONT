<head>
  <link rel="stylesheet" href="../css/list_produtos.css">
</head>

<body>
<h1 class="text-center my-3">Lista de Materiais</h1>
<div class="row">
  <div class="col-12">
    <table class="table">
      <thead>
        <tr>
          <th>Imagem</th>
          <th>Nome</th>
          <th>Qualidade</th>
          <th>Dimensão</th>
          <th>Preço</th>
          <th>Código da chapa</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>
        {{#each chapa}}
        <tr>
          <td>
            <img src="{{this.link}}" alt="Imagem da chapa" width="150" height="150" style="cursor: pointer;" onclick="showModal('{{this.link}}')" />
          </td>
          <td>
            <strong>{{this.nome}}</strong>
          </td>
          <td>
            {{this.qualidade}}
          </td>
          <td>
            {{this.largura}}x{{this.altura}}
          </td>
          <td>
            R${{this.preco}}
          </td>
          <td>
            {{this.id_chapa}}
          </td>
          <td>
            <a href="/carrinho/Adicionar/{{this.id_chapa}}/{{this.nome}}/{{this.preco}}/{{encodeURIComponent this.link}}/{{this.largura}}/{{this.altura}}" class="btn btn-primary">
              <i class="bi bi-cart"></i> 
            </a>
            <a href="/chapa/alterar/{{this.id_chapa}}" class="btn btn-warning" title="Alterar">
              <i class="bi bi-pencil"></i>
            </a>
            <form action="/chapa/excluir/{{this.id_chapa}}" method="POST" style="display:inline;">
              <button type="submit" class="btn btn-danger" title="Excluir" onclick="return confirm('Tem certeza que deseja excluir esta chapa?');">
                <i class="bi bi-trash"></i>
              </button>
            </form>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <!-- Botão flutuante -->
  <a href="/chapas/cadastrar" class="btn btn-success btn-floating" id="btn-flutuante" title="Cadastrar nova chapa">
    <i class="bi bi-plus"></i>
  </a>
</div>

<!-- Modal para visualização de imagem -->
<div id="imageModal" class="modal" onclick="hideModal()">
  <span class="close" onclick="hideModal()">&times;</span>
  <img class="modal-content" id="modalImage">
</div>

</body>


<script>
  // Função para exibir o modal com a imagem ampliada
  function showModal(imageSrc) {
    var modal = document.getElementById("imageModal");
    var modalImg = document.getElementById("modalImage");
    modal.style.display = "block";
    modalImg.src = imageSrc;
  }

  // Função para fechar o modal
  function hideModal() {
    var modal = document.getElementById("imageModal");
    modal.style.display = "none";
  }

  
  
</script>